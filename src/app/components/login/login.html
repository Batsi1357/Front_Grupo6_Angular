<div class="login-wrapper">
  <div class="login-card">
    <div class="header">
      <p class="eyebrow">Acceso</p>
      <h2>{{ showRegister ? 'Crear Cuenta' : 'Bienvenido' }}</h2>
      <p class="subtitle">{{ showRegister ? 'Completa el formulario para registrarte.' : 'Ingresa tus credenciales para continuar.' }}</p>
    </div>

    <!-- FORMULARIO DE LOGIN -->
    <form *ngIf="!showRegister" [formGroup]="loginForm" (ngSubmit)="Ingresar()" novalidate>
      <div class="form-group">
        <label for="username">Usuario</label>
        <input type="text" id="username" formControlName="username" placeholder="tu.usuario" />
        <div *ngIf="loginForm.get('username')?.invalid && loginForm.get('username')?.touched" class="error">
          El nombre de usuario es requerido.
        </div>
      </div>

      <div class="form-group">
        <label for="password">Contraseña</label>
        <input type="password" id="password" formControlName="password" placeholder="••••••••" />
        <div *ngIf="loginForm.get('password')?.invalid && loginForm.get('password')?.touched" class="error">
          La contraseña es requerida.
        </div>
      </div>

      <button type="submit" class="btn primary" [disabled]="loginForm.invalid">Ingresar</button>
      <button type="button" class="btn secondary" (click)="toggleRegister()">Crear Cuenta</button>
    </form>

    <!-- FORMULARIO DE REGISTRO -->
    <form *ngIf="showRegister" [formGroup]="registerForm" (ngSubmit)="Registrarse()" novalidate>
      <div class="form-group">
        <label for="reg-username">Usuario</label>
        <input type="text" id="reg-username" formControlName="username" placeholder="ej. juan.perez" />
        <div *ngIf="registerForm.get('username')?.invalid && registerForm.get('username')?.touched" class="error">
          El usuario debe tener al menos 3 caracteres.
        </div>
      </div>

      <div class="form-group">
        <label for="reg-password">Contraseña</label>
        <input type="password" id="reg-password" formControlName="password" placeholder="••••••••" />
        <div *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched" class="error">
          La contraseña debe tener al menos 6 caracteres.
        </div>
      </div>

      <div class="form-group">
        <label for="reg-confirmPassword">Confirmar Contraseña</label>
        <input type="password" id="reg-confirmPassword" formControlName="confirmPassword" placeholder="••••••••" />
        <div *ngIf="registerForm.get('confirmPassword')?.invalid && registerForm.get('confirmPassword')?.touched" class="error">
          Confirma tu contraseña.
        </div>
        <div *ngIf="registerForm.hasError('passwordMismatch') && registerForm.get('confirmPassword')?.touched" class="error">
          Las contraseñas no coinciden.
        </div>
      </div>

      <div class="form-group">
        <label for="rol">Tipo de Usuario</label>
        <select id="rol" formControlName="rol">
          <option value="ESTUDIANTE">Estudiante</option>
          <option value="ADMIN">Administrador</option>
        </select>
      </div>

      <button type="submit" class="btn primary" [disabled]="registerForm.invalid">Registrarse</button>
      <button type="button" class="btn secondary" (click)="toggleRegister()">Volver a Login</button>
    </form>
  </div>
</div>
