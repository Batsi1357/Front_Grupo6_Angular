<div class="container-unidades">
  <div class="header-with-back">
    <button class="btn-volver" (click)="volverAlHome()" title="Volver al Home">
      â¬…ï¸ Volver al Home
    </button>
    <h1>Consultas de Unidades</h1>
  </div>
  <p class="subtitulo">4 Queries Diferentes - Unidad Entity</p>

  <!-- Panel de BÃºsquedas -->
  <div class="panel-busquedas">

    <!-- Query 1: Buscar por CategorÃ­a Exacta (Query Method) -->
    <div class="query-card">
      <div class="query-header">
        <span class="query-badge query-method">Query Method</span>
        <h3>Buscar por CategorÃ­a Exacta</h3>
      </div>
      <div class="query-body">
        <input
          type="text"
          [(ngModel)]="busquedaCategoria"
          placeholder="Ej: ProgramaciÃ³n"
          class="input-busqueda"
          (keyup.enter)="buscarPorCategoria()">
        <button (click)="buscarPorCategoria()" class="btn-buscar" [disabled]="cargando">
          ğŸ” Buscar
        </button>
      </div>
    </div>

    <!-- Query 2: Buscar por Nivel >= (Query Method) -->
    <div class="query-card">
      <div class="query-header">
        <span class="query-badge query-method">Query Method</span>
        <h3>Buscar por Nivel MÃ­nimo</h3>
      </div>
      <div class="query-body">
        <input
          type="number"
          [(ngModel)]="busquedaNivel"
          placeholder="Ej: 1"
          class="input-busqueda"
          min="1"
          (keyup.enter)="buscarPorNivel()">
        <button (click)="buscarPorNivel()" class="btn-buscar" [disabled]="cargando">
          ğŸ” Buscar
        </button>
      </div>
    </div>

    <!-- Query 3: Buscar por DuraciÃ³n MÃ­nima (SQL Nativo) -->
    <div class="query-card">
      <div class="query-header">
        <span class="query-badge sql-nativo">SQL Nativo</span>
        <h3>Buscar por DuraciÃ³n MÃ­nima</h3>
      </div>
      <div class="query-body">
        <input
          type="number"
          [(ngModel)]="busquedaDuracion"
          placeholder="Ej: 10"
          class="input-busqueda"
          min="1"
          (keyup.enter)="buscarPorDuracion()">
        <button (click)="buscarPorDuracion()" class="btn-buscar" [disabled]="cargando">
          ğŸ” Buscar
        </button>
      </div>
    </div>

    <!-- Query 4: Buscar por TÃ­tulo (JPQL) -->
    <div class="query-card">
      <div class="query-header">
        <span class="query-badge jpql">JPQL</span>
        <h3>Buscar por TÃ­tulo</h3>
      </div>
      <div class="query-body">
        <input
          type="text"
          [(ngModel)]="busquedaTitulo"
          placeholder="Ej: Java o SQL"
          class="input-busqueda"
          (keyup.enter)="buscarPorTitulo()">
        <button (click)="buscarPorTitulo()" class="btn-buscar" [disabled]="cargando">
          ğŸ” Buscar
        </button>
      </div>
    </div>

  </div>

  <!-- Botones de Control -->
  <div class="controles">
    <button (click)="cargarTodas()" class="btn-todos" [disabled]="cargando">
      ğŸ“‹ Ver Todos
    </button>
    <button (click)="limpiarBusqueda()" class="btn-limpiar" [disabled]="cargando">
      ğŸ”„ Limpiar
    </button>
  </div>

  <!-- Mensaje de Estado -->
  <div class="mensaje-estado" *ngIf="mensaje">
    <span [class.cargando]="cargando">{{ mensaje }}</span>
  </div>

  <!-- Tabla de Resultados -->
  <div class="tabla-container">
    <table class="tabla-unidades" *ngIf="unidadesFiltradas.length > 0">
      <thead>
        <tr>
          <th>ID</th>
          <th>TÃ­tulo</th>
          <th>CategorÃ­a</th>
          <th>Nivel</th>
          <th>DuraciÃ³n</th>
          <th>DescripciÃ³n</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let unidad of unidadesFiltradas" class="fila-unidad">
          <td [class.celda-llena]="unidad.idUnidad" [class.celda-vacia]="!unidad.idUnidad">{{ unidad.idUnidad || '-' }}</td>
          <td [class.celda-llena]="unidad.titulo" [class.celda-vacia]="!unidad.titulo">{{ unidad.titulo || '-' }}</td>
          <td [class.celda-llena]="unidad.categoria" [class.celda-vacia]="!unidad.categoria">{{ unidad.categoria || '-' }}</td>
          <td [class.celda-llena]="unidad.nivel" [class.celda-vacia]="!unidad.nivel">{{ unidad.nivel || '-' }}</td>
          <td [class.celda-llena]="unidad.duracion" [class.celda-vacia]="!unidad.duracion">{{ unidad.duracion || '-' }}</td>
          <td [class.celda-llena]="unidad.descripcion" [class.celda-vacia]="!unidad.descripcion">{{ unidad.descripcion || '-' }}</td>
        </tr>
      </tbody>
    </table>

    <div class="no-resultados" *ngIf="unidadesFiltradas.length === 0 && !cargando">
      <p>âŒ No se encontraron unidades con los criterios de bÃºsqueda</p>
    </div>

    <div class="loader" *ngIf="cargando">
      <p>â³ Cargando...</p>
    </div>
  </div>
</div>
